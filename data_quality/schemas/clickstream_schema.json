{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Clickstream Event",
    "description": "Schema for raw clickstream events from Kinesis",
    "type": "object",
    "required": [
        "event_id",
        "event_type",
        "event_timestamp",
        "customer_id"
    ],
    "properties": {
        "event_id": {
            "type": "string",
            "pattern": "^[a-f0-9-]{36}$",
            "description": "UUID v4 event identifier"
        },
        "event_type": {
            "type": "string",
            "enum": [
                "page_view",
                "add_to_cart",
                "remove_from_cart",
                "purchase",
                "search",
                "wishlist_add"
            ]
        },
        "event_timestamp": {
            "type": "string",
            "format": "date-time"
        },
        "customer_id": {
            "type": "string",
            "pattern": "^CUST-\\d{6}$"
        },
        "session_id": {
            "type": "string"
        },
        "channel": {
            "type": "string",
            "enum": [
                "web",
                "mobile_app",
                "tablet"
            ]
        },
        "device": {
            "type": "string"
        },
        "browser": {
            "type": "string"
        },
        "region": {
            "type": "string"
        },
        "page_url": {
            "type": "string"
        },
        "product_id": {
            "type": "string",
            "pattern": "^PROD-\\d{4}$"
        },
        "quantity": {
            "type": "integer",
            "minimum": 1
        },
        "unit_price": {
            "type": "number",
            "minimum": 0
        },
        "search_term": {
            "type": "string"
        },
        "order_total": {
            "type": "number",
            "minimum": 0
        },
        "payment_method": {
            "type": "string",
            "enum": [
                "credit_card",
                "debit_card",
                "paypal",
                "apple_pay",
                "google_pay"
            ]
        }
    },
    "additionalProperties": true
}